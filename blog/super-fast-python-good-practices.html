<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Maven+Pro&amp;family=Share+Tech+Mono&amp;family=Source+Sans+Pro&amp;family=Ubuntu&amp;display=swap" data-optimized-fonts="true"/><meta charSet="utf-8" class="jsx-1274090743"/><meta name="viewport" content="width=device-width, initial-scale=1" class="jsx-1274090743"/><meta name="description" content="Write Python programs by following good practices to run code incredibly faster." class="jsx-1274090743"/><meta name="author" content="Santha Lakshmi Narayana" class="jsx-1274090743"/><meta name="keywords" content="python-performance,python-optimize,python,fast-python,speed,python" class="jsx-1274090743"/><meta property="og:title" content="Super fast Python (Part-2): Good Practices- Santha Lakshmi Narayana" class="jsx-1274090743"/><meta property="og:description" content="Write Python programs by following good practices to run code incredibly faster." class="jsx-1274090743"/><meta property="og:url" content="https://santhalakshminarayana.github.io/blog/super-fast-python-good-practices" class="jsx-1274090743"/><meta property="og:image" content="https://santhalakshminarayana.github.io/images/super-fast-python-good-practices/super-fast-python-good-practices.jpg" class="jsx-1274090743"/><meta property="og:type" content="article" class="jsx-1274090743"/><meta property="og:article:publisher" content="https://santhalakshminarayana.github.io/" class="jsx-1274090743"/><meta property="og:site_name" content="Santha Lakshmi Narayana" class="jsx-1274090743"/><meta name="twitter:card" content="summary_large_image" class="jsx-1274090743"/><meta name="twitter:title" content="Super fast Python (Part-2): Good Practices- Santha Lakshmi Narayana" class="jsx-1274090743"/><meta name="twitter:description" content="Write Python programs by following good practices to run code incredibly faster." class="jsx-1274090743"/><meta name="twitter:url" content="https://santhalakshminarayana.github.io/blog/super-fast-python-good-practices" class="jsx-1274090743"/><meta name="twitter:site" content="@santhalakshminarayana" class="jsx-1274090743"/><meta name="twitter:image" content="https://santhalakshminarayana.github.io/images/super-fast-python-good-practices/super-fast-python-good-practices.jpg" class="jsx-1274090743"/><meta name="twitter:creator" content="@santhalakshminarayana" class="jsx-1274090743"/><link rel="icon" href="/images/santha-lakshmi-narayana-logo.png?" class="jsx-1274090743"/><link rel="canonical" href="https://santhalakshminarayana.github.io/blog/super-fast-python-good-practices" class="jsx-1274090743"/><title class="jsx-1274090743">Super fast Python (Part-2): Good Practices- Santha Lakshmi Narayana</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous" class="jsx-1274090743"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/b1be9be44572118d40d2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b1be9be44572118d40d2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-2b6f4fb4c650415a78b4.js" defer=""></script><script src="/_next/static/chunks/framework.1b3b121feae4c8ce410b.js" defer=""></script><script src="/_next/static/chunks/commons.5b2d72a8e34e4f7cda46.js" defer=""></script><script src="/_next/static/chunks/main-d372fe187139d1f38e70.js" defer=""></script><script src="/_next/static/chunks/pages/_app-90550e3da438f273bbf6.js" defer=""></script><script src="/_next/static/chunks/d0447323.c092ac6ab57aede80368.js" defer=""></script><script src="/_next/static/chunks/773f402080c38a523cb0b4f52dac49b5097e45fc.c30f0cfea8498bde8fa9.js" defer=""></script><script src="/_next/static/chunks/6188d020c9511bd1e7ae4c1c2034aa4e99a1704e.fe25fa9d88e935be6ae1.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-d3a90f1f73d9eb2bb713.js" defer=""></script><script src="/_next/static/jBc4UZUL4xIRAkt3gOT-Q/_buildManifest.js" defer=""></script><script src="/_next/static/jBc4UZUL4xIRAkt3gOT-Q/_ssgManifest.js" defer=""></script><style id="__jsx-1906274153">.tags.jsx-1906274153{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:1vw 5vw 1vw 5vw;background-color:#fffecb;border-bottom:5px solid #071013;}.tags.jsx-1906274153 a.jsx-1906274153{font-family:'Share Tech Mono',monospace;color:#1d2b35;margin:0 1em 0 1em;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px dashed #fb232e;}.tags.jsx-1906274153 a.jsx-1906274153:hover{background:#20a4f3;color:#fffecb;border-bottom:1px dashed #fffecb;}.tags.jsx-1906274153 a.jsx-1906274153:active{background:#fb232e;}</style><style id="__jsx-286259859">.header-container.jsx-286259859{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:10px 5vw 10px 5vw;background:#1d2b35;}.header-left.jsx-286259859{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.header-left.jsx-286259859 a.jsx-286259859{font-family:'Source Sans Pro',sans-serif;-webkit-text-decoration:none;text-decoration:none;color:#ffaa33;}img.jsx-286259859{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;width:calc(1.2rem + 1vw);max-width:calc(1.2rem + 1vw);height:auto;margin:0 5px 0 5px;}img.jsx-286259859:hover{cursor:pointer;}.header-left.jsx-286259859 a.jsx-286259859:hover{color:#20a4f3;}.header-left.jsx-286259859 a.jsx-286259859:active{color:#fb232e;}.header-right.jsx-286259859{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:3;-ms-flex:3;flex:3;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.header-right.jsx-286259859 a.jsx-286259859{padding:0 1vw 0 1vw;font-family:'Source Sans Pro',sans-serif;-webkit-text-decoration:none;text-decoration:none;color:#ffaa33;}.header-right.jsx-286259859 a.jsx-286259859:hover{color:#20a4f3;}.header-right.jsx-286259859 a.jsx-286259859:active{color:#fb232e;}@media screen and (max-width:920px){.header-container.jsx-286259859{padding:10px 2vw 10px 2vw;overflow-x:scroll;}#name.jsx-286259859{display:none;}img.jsx-286259859{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media screen and (max-width:480px){.header-container.jsx-286259859{padding:10px 2vw 10px 2vw;overflow-x:scroll;}}@media screen and (max-width:300px){img.jsx-286259859{display:none;}}</style><style id="__jsx-4051774662">.img-text.jsx-4051774662{display:block;text-align:center;font-family:'Source Sans Pro',sans-serif;font-size:calc(0.8rem + 0.1vw);color:#1d2b35;overflow-wrap:'break-word',;}a.jsx-4051774662{margin:0;-webkit-text-decoration:none;text-decoration:none;color:#1d2b35;border-bottom:1px solid;}</style><style id="__jsx-2122502216">.file-name-container.jsx-2122502216{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;max-width:100%;background-color:#1d2b35d9;padding:calc(0.5rem + 0.2vw);border-top-left-radius:5px;border-top-right-radius:5px;margin-top:1vh;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:break-word;}.file-name.jsx-2122502216{font-family:'Share Tech Mono',monospace;font-size:calc(0.9rem + 0.1vw);color:#fffecbf2;}</style><style id="__jsx-1393389675">.footer-container.jsx-1393389675{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background:#1d2b35e6;padding:1vw 1vw 1vw 1vw;}.footer-container-links.jsx-1393389675{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.footer-links.jsx-1393389675{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.link-item.jsx-1393389675{margin:0 1vw 0 1vw;}.link.jsx-1393389675{-webkit-text-decoration:none;text-decoration:none;cursor:pointer: background-color:yellow;}.link.jsx-1393389675:hover{color:black;}.copy-right-container.jsx-1393389675{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:10px;}.copy-right-text.jsx-1393389675{font-family:'Maven Pro',sans-serif;font-size:calc(0.75rem + 0.1vw);color:#fffecb;}</style><style id="__jsx-1274090743">.blog-content.jsx-1274090743{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:100%;-ms-flex:100%;flex:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:1vw 25vw 1vw 25vw;width:50vw;max-width:50vw;min-height:90vh;}@media screen and (max-width:980px){.blog-content.jsx-1274090743{margin:1vw 15vw 1vw 15vw;width:70vw;max-width:70vw;}}@media screen and (max-width:760px){.blog-content.jsx-1274090743{margin:1vw 5vw 1vw 5vw;width:90vw;max-width:90vw;}}</style><style data-href="https://fonts.googleapis.com/css2?family=Maven+Pro&family=Share+Tech+Mono&family=Source+Sans+Pro&family=Ubuntu&display=swap">@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v32/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX25nM.woff) format('woff')}@font-face{font-family:'Share Tech Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sharetechmono/v15/J7aHnp1uDWRBEqV98dVQztYldFc7pw.woff) format('woff')}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3aPA.woff) format('woff')}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgo6ew.woff) format('woff')}@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v32/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX21nijpBh8CvRBOB1s.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v32/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX21nmjpBh8CvRBOB1s.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Maven Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/mavenpro/v32/7Auup_AqnyWWAxW2Wk3swUz56MS91Eww8SX21nejpBh8CvRBOA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Share Tech Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sharetechmono/v15/J7aHnp1uDWRBEqV98dVQztYldFcLowEFA87Heg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNa7lujVj9_mf.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qPK7lujVj9_mf.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNK7lujVj9_mf.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qO67lujVj9_mf.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qN67lujVj9_mf.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNq7lujVj9_mf.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Source Sans Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourcesanspro/v21/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcg72nU6AF7xm.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKew72nU6AF7xm.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcw72nU6AF7xm.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfA72nU6AF7xm.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcQ72nU6AF7xm.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfw72nU6AFw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div style="min-height:100vh" class="jsx-1274090743"><div class="jsx-286259859 header"><div class="jsx-286259859 header-container"><div class="jsx-286259859 header-left"><img src="/images/santha-lakshmi-narayana-logo.png" alt="Logo" class="jsx-286259859"/><a id="name" class="jsx-286259859" href="/"><b class="jsx-286259859">Santha Lakshmi Narayana</b></a></div><div class="jsx-286259859 header-right"><a class="jsx-286259859" href="/about">About</a><a href="#" class="jsx-286259859">Tags</a><a class="jsx-286259859" href="/">Home</a></div></div><div style="display:none" class="jsx-286259859"><div class="jsx-1906274153 tags"><a class="jsx-1906274153" href="/tags/image-processing">#image-processing</a><a class="jsx-1906274153" href="/tags/opencv">#opencv</a><a class="jsx-1906274153" href="/tags/python-performance">#python-performance</a><a class="jsx-1906274153" href="/tags/color-science">#color-science</a><a class="jsx-1906274153" href="/tags/react">#react</a><a class="jsx-1906274153" href="/tags/next-js">#next-js</a><a class="jsx-1906274153" href="/tags/flutter">#flutter</a></div></div></div><article class="jsx-1274090743 blog-content"><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word"><picture class="jsx-4051774662"><img src="/images/super-fast-python-good-practices/super-fast-python-good-practices.jpg" alt="Super fast Python" style="width:100%;max-width:100%;height:auto;margin-left:0%" class="jsx-4051774662"/><span class="jsx-4051774662 img-text"></span></picture></p><h1 style="font-family:&#x27;Ubuntu&#x27;, sans-serif;font-size:calc(1rem + 1.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Super fast Python (Part-2): Good practices</h1><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">In the earlier post on <a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow">why Python is slow?</a>, we discussed slowness is in Python due to its internal design of some essential components like GIL, dynamic typing, and interpretation.</p><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">In this blog, we discuss some good practices to speed up Python incredibly faster.</p><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">This is the second post in the series on Python performance and Optimization. The series points out the utilization of inbuilt libraries, low-level code conversions, and other Python implementations to speed-up Python. The other posts included in this series are </p><ul style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word"><li>(Part-1): <a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow">Why Python is slow?</a></li><li>(Part-2): Good practices to write fast Python code (this post)</li><li>(Part-3): <a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://santhalakshminarayana.github.io/blog/super-fast-python-multi-processing">Multi-processing in Python</a></li><li>(Part-4): Use Cython to get speed as fast as C</li><li>(Part-5): Use Numba to speed up Python Functions and Classes</li></ul><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">The following section describes the various good practices one can use to make Python super speed (up to 30% or more) without any external support like PyPy, Cython, Numpy, etc.</p><h2 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 1vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Python good practices for super fast code</h2><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Use built-in data structures and libraries</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">As Python data types are implemented directly in <strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">C</strong>, using the built-in types like list, map, and trees, compared to custom types we define, really helps the program to run faster.</p><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Also, use built-in libraries for common algorithms like counting the duplicates, summing all list elements, finding the maximum element, etc, because these are all already written in <strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">C</strong> and compiled which makes these functions run faster than custom functions we write.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">from</span><span> random </span><span class="token" style="color:#569CD6">import</span><span> randint
</span>
<span>rand_nums </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>randint</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">100</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">for</span><span> _ </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">100000</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></code></pre></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Create 100000 random numbers between 1 and 100.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">%</span><span class="token" style="color:#d4d4d4">%</span><span>timeit
</span><span>cc </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span><span></span><span class="token" style="color:#569CD6">for</span><span> i </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>rand_nums</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    cc </span><span class="token" style="color:#d4d4d4">+=</span><span> rand_nums</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></code></pre></pre><pre><div class="jsx-2122502216"><div class="jsx-2122502216 file-name-container"><p class="jsx-2122502216 file-name">output</p></div><pre class="language-python:output" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#b5cea8">6.02</span><span> ms ± </span><span class="token" style="color:#b5cea8">94</span><span> µs per loop </span><span class="token" style="color:#d4d4d4">(</span><span>mean ± std</span><span class="token" style="color:#d4d4d4">.</span><span> dev</span><span class="token" style="color:#d4d4d4">.</span><span> of </span><span class="token" style="color:#b5cea8">7</span><span> runs</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">100</span><span> loops each</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Manually summing up the all numbers over running a loop takes approximately 6ms.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">%</span><span class="token" style="color:#d4d4d4">%</span><span>timeit
</span><span>cc </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">sum</span><span class="token" style="color:#d4d4d4">(</span><span>rand_nums</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></pre><pre><div class="jsx-2122502216"><div class="jsx-2122502216 file-name-container"><p class="jsx-2122502216 file-name">output</p></div><pre class="language-python:output" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#b5cea8">332</span><span> µs ± </span><span class="token" style="color:#b5cea8">15</span><span> µs per loop </span><span class="token" style="color:#d4d4d4">(</span><span>mean ± std</span><span class="token" style="color:#d4d4d4">.</span><span> dev</span><span class="token" style="color:#d4d4d4">.</span><span> of </span><span class="token" style="color:#b5cea8">7</span><span> runs</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">1000</span><span> loops each</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Using built-in <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">sum()</em> takes only 0.3ms approximately.</p><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Local Variables vs Global Variables</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">When we call a function (a routine), the system pauses the code execution at the call site in the current routine (say <strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">main()</strong>) where the call has been made and places the called function at the top of the call stack. Imagine if we have defined numerous global variables and made multiple function calls. The system has to make sure that all these global variables should be available for any routine placed in the call stack at all times. The system has to provide a lookup mechanism for both local and global variables for each routine. And with global variables, this lookup mechanism may take some time than local variables.</p><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Import the sub-modules and functions directly</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">When importing any module to use its sub-modules, classes, or functions, import them directly instead of importing just the module. When accessing objects using <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">.</em>, it triggers dictionary lookup using <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">_<!-- -->_<!-- -->getattribute<!-- -->_<!-- -->_</em>. If we call the object multiple times using <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">.</em>, that may increase the program time.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955"># instead of this</span><span>
</span><span></span><span class="token" style="color:#569CD6">import</span><span> abc
</span><span>def_obj </span><span class="token" style="color:#d4d4d4">=</span><span> abc</span><span class="token" style="color:#d4d4d4">.</span><span>Def</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#6a9955"># do this</span><span>
</span><span></span><span class="token" style="color:#569CD6">from</span><span> abc </span><span class="token" style="color:#569CD6">import</span><span> Def
</span><span>def_obj </span><span class="token" style="color:#d4d4d4">=</span><span> Def</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></pre><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Limit the usage of &#x27;.&#x27;</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Speaking of the lookup time with the module&#x27;s object references, the same can be applied to the referencing of properties and functions of an object(both custom and in-built). </p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">%</span><span class="token" style="color:#d4d4d4">%</span><span>timeit
</span><span>ll </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span></span><span class="token" style="color:#569CD6">for</span><span> i </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>rand_nums</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    ll</span><span class="token" style="color:#d4d4d4">.</span><span>append</span><span class="token" style="color:#d4d4d4">(</span><span>rand_nums</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></pre><pre><div class="jsx-2122502216"><div class="jsx-2122502216 file-name-container"><p class="jsx-2122502216 file-name">output</p></div><pre class="language-python:output" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#b5cea8">6.67</span><span> ms ± </span><span class="token" style="color:#b5cea8">84.7</span><span> µs per loop </span><span class="token" style="color:#d4d4d4">(</span><span>mean ± std</span><span class="token" style="color:#d4d4d4">.</span><span> dev</span><span class="token" style="color:#d4d4d4">.</span><span> of </span><span class="token" style="color:#b5cea8">7</span><span> runs</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">100</span><span> loops each</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Adding the list elements by appending with <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">list.append()</em> takes more time than following code because the function is assigned to a variable (functions are first-class citizens in Python) and used inside the loop. This simple practice avoids referencing the functions with <strong style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;font-weight:bold;color:#1d2b35f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">&#x27;.&#x27;</strong> too often and finally limits the need for dictionary lookup.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">%</span><span class="token" style="color:#d4d4d4">%</span><span>timeit
</span><span>ll </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span>ll_append </span><span class="token" style="color:#d4d4d4">=</span><span> ll</span><span class="token" style="color:#d4d4d4">.</span><span>append
</span><span></span><span class="token" style="color:#569CD6">for</span><span> i </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>rand_nums</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    ll_append</span><span class="token" style="color:#d4d4d4">(</span><span>rand_nums</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></pre><pre><div class="jsx-2122502216"><div class="jsx-2122502216 file-name-container"><p class="jsx-2122502216 file-name">output</p></div><pre class="language-python:output" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#b5cea8">5.45</span><span> ms ± </span><span class="token" style="color:#b5cea8">116</span><span> µs per loop </span><span class="token" style="color:#d4d4d4">(</span><span>mean ± std</span><span class="token" style="color:#d4d4d4">.</span><span> dev</span><span class="token" style="color:#d4d4d4">.</span><span> of </span><span class="token" style="color:#b5cea8">7</span><span> runs</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">100</span><span> loops each</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Avoid writing functions unnecessary</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">It&#x27;s good to have code separability by using functions for each independent task. But, as functions in Python are relatively more expensive than C/C++ due to boxing and unboxing dynamic variables and other factors, limit writing functions for unnecessary cases like one-liners. </p><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">Don&#x27;t wrap lambdas around functions</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Overuse or misuse of lambdas is not a good practice. It&#x27;s common to wrap functions inside lambdas which do the same thing without wrapping.</p><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">Consider the following two functions for sorting a list based on absolute values.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">fun_sort_with_lambda</span><span class="token" style="color:#d4d4d4">(</span><span>l</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">return</span><span> </span><span class="token" style="color:#ce9178">sorted</span><span class="token" style="color:#d4d4d4">(</span><span>l</span><span class="token" style="color:#d4d4d4">,</span><span> key</span><span class="token" style="color:#d4d4d4">=</span><span class="token" style="color:#569CD6">lambda</span><span> x</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">abs</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">fun_sort_without_lambda</span><span class="token" style="color:#d4d4d4">(</span><span>l</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">return</span><span> </span><span class="token" style="color:#ce9178">sorted</span><span class="token" style="color:#d4d4d4">(</span><span>l</span><span class="token" style="color:#d4d4d4">,</span><span> key</span><span class="token" style="color:#d4d4d4">=</span><span class="token" style="color:#ce9178">abs</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">If we look at the CPython bytecode for the above functions with lambda expression passed as a key and with <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">abs</em> function object as a key,</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">&gt;&gt;</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#569CD6">from</span><span> dis </span><span class="token" style="color:#569CD6">import</span><span> dis
</span><span></span><span class="token" style="color:#d4d4d4">&gt;&gt;</span><span class="token" style="color:#d4d4d4">&gt;</span><span> dis</span><span class="token" style="color:#d4d4d4">(</span><span>fun_sort_with_lambda</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>  </span><span class="token" style="color:#b5cea8">2</span><span>           </span><span class="token" style="color:#b5cea8">0</span><span> LOAD_GLOBAL              </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">sorted</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">2</span><span> LOAD_FAST                </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>l</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">4</span><span> LOAD_CONST               </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">&lt;</span><span>code </span><span class="token" style="color:#ce9178">object</span><span> </span><span class="token" style="color:#d4d4d4">&lt;</span><span class="token" style="color:#569CD6">lambda</span><span class="token" style="color:#d4d4d4">&gt;</span><span> at </span><span class="token" style="color:#b5cea8">0x7fc51b3a19d0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">file</span><span> </span><span class="token" style="color:#ce9178">&quot;&lt;ipython-input-62-c4147c242c71&gt;&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> line </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">&gt;</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">6</span><span> LOAD_CONST               </span><span class="token" style="color:#b5cea8">2</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;fun_sort_with_lambda.&lt;locals&gt;.&lt;lambda&gt;&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">8</span><span> MAKE_FUNCTION            </span><span class="token" style="color:#b5cea8">0</span><span>
</span><span>             </span><span class="token" style="color:#b5cea8">10</span><span> LOAD_CONST               </span><span class="token" style="color:#b5cea8">3</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;key&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>             </span><span class="token" style="color:#b5cea8">12</span><span> CALL_FUNCTION_KW         </span><span class="token" style="color:#b5cea8">2</span><span>
</span><span>             </span><span class="token" style="color:#b5cea8">14</span><span> RETURN_VALUE
</span>
<span>Disassembly of </span><span class="token" style="color:#d4d4d4">&lt;</span><span>code </span><span class="token" style="color:#ce9178">object</span><span> </span><span class="token" style="color:#d4d4d4">&lt;</span><span class="token" style="color:#569CD6">lambda</span><span class="token" style="color:#d4d4d4">&gt;</span><span> at </span><span class="token" style="color:#b5cea8">0x7fc51b3a19d0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">file</span><span> </span><span class="token" style="color:#ce9178">&quot;&lt;ipython-input-62-c4147c242c71&gt;&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> line </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">&gt;</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>  </span><span class="token" style="color:#b5cea8">2</span><span>           </span><span class="token" style="color:#b5cea8">0</span><span> LOAD_GLOBAL              </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">abs</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">2</span><span> LOAD_FAST                </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">4</span><span> CALL_FUNCTION            </span><span class="token" style="color:#b5cea8">1</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">6</span><span> RETURN_VALUE
</span>
<span></span><span class="token" style="color:#d4d4d4">&gt;&gt;</span><span class="token" style="color:#d4d4d4">&gt;</span><span> dis</span><span class="token" style="color:#d4d4d4">(</span><span>fun_sort_without_lambda</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>  </span><span class="token" style="color:#b5cea8">2</span><span>           </span><span class="token" style="color:#b5cea8">0</span><span> LOAD_GLOBAL              </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">sorted</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">2</span><span> LOAD_FAST                </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>l</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">4</span><span> LOAD_GLOBAL              </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">abs</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">6</span><span> LOAD_CONST               </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;key&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>              </span><span class="token" style="color:#b5cea8">8</span><span> CALL_FUNCTION_KW         </span><span class="token" style="color:#b5cea8">2</span><span>
</span><span>             </span><span class="token" style="color:#b5cea8">10</span><span> RETURN_VALUE
</span></code></pre></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">for the function <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">fun_sort_with_lambda</em>, there is an additional function has been generated for lambda. We can avoid this function generation without using lambda as we can see in function <em style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);font-style:normal;background-color:#07101326;color:#071013f2;margin:0vh 0 1vh 0;padding:0 2px 0 2px;border-radius:2px">fun_sort_without_lambda</em>. </p><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">List comprehension is fast</h3><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">When operating over lists like data structures, list comprehension is faster than traditional methods like looping, functional programming, etc.</p><pre><pre class="language-python" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">%</span><span class="token" style="color:#d4d4d4">%</span><span>timeit
</span><span>rand_nums </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span></span><span class="token" style="color:#569CD6">for</span><span> _ </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1000</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    rand_nums</span><span class="token" style="color:#d4d4d4">.</span><span>append</span><span class="token" style="color:#d4d4d4">(</span><span>randint</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">100</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></pre><pre><pre class="language-output" style="color:#d4d4d4;font-size:calc(0.9rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-top:1vh;margin-bottom:1vh;border-radius:5px"><code class="language-output" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>603 µs ± 15.3 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</span></code></pre></pre><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">The list comprehension version of the above code snippet runs faster.</p><pre><div class="jsx-2122502216"><div class="jsx-2122502216 file-name-container"><p class="jsx-2122502216 file-name">output</p></div><pre class="language-python:output" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">%</span><span class="token" style="color:#d4d4d4">%</span><span>timeit
</span><span>rand_nums </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>randint</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">100</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">for</span><span> _ </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1000</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></code></pre></div></pre><pre><div class="jsx-2122502216"><div class="jsx-2122502216 file-name-container"><p class="jsx-2122502216 file-name">output</p></div><pre class="language-python:output" style="color:#1d2b35;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0px;overflow:auto;background:#1e1e1e;background-color:#071013f2;padding-bottom:0px;margin-bottom:1vh;border-bottom-left-radius:5px;border-bottom-right-radius:5px"><code class="language-python" style="color:#d4d4d4;font-size:calc(0.8rem + 0.1vw);text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.2;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#b5cea8">565</span><span> µs ± </span><span class="token" style="color:#b5cea8">11</span><span> µs per loop </span><span class="token" style="color:#d4d4d4">(</span><span>mean ± std</span><span class="token" style="color:#d4d4d4">.</span><span> dev</span><span class="token" style="color:#d4d4d4">.</span><span> of </span><span class="token" style="color:#b5cea8">7</span><span> runs</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">1000</span><span> loops each</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></code></pre></div></pre><hr style="margin:2vh 25% 2vh 25%;border:1px solid #07101380"/><p style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013f2;margin:0vh 0 1vh 0;overflow-wrap:break-word">The optimization practices are not limited to the above approaches. We can check how much time it is taking for each line by using libraries like <a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/profile.html">CProfile</a> and making changes to run faster. In the next blog, we discuss how to improve Python computing efficiency using multiprocessing.</p><hr style="margin:2vh 25% 2vh 25%;border:1px solid #07101380"/><h3 style="font-family:&#x27;Maven Pro&#x27;, sans-serif;font-size:calc(1rem + 0.5vw);color:#1d2b35;margin:1vh 0 1vh 0;overflow-wrap:break-word" id="">References</h3><ul style="font-family:&#x27;Source Sans Pro&#x27;, sans-serif;font-size:calc(1rem + 0.1vw);color:#071013e6;margin:1vh 0 1vh calc(2vw);overflow-wrap:break-word"><li><a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://wiki.python.org/moin/PythonSpeed">Python Speed</a></li><li><a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://aglowiditsolutions.com/blog/python-optimization/">Python Optimization</a></li><li><a style="color:#071013;text-decoration:none;cursor:pointer;border-bottom:1px dashed #fb232e;font-size:calc(1rem + 0.1vw);font-weight:bold;overflow-wrap:break-word" target="_blank" rel="noreferrer" href="https://martinheinz.dev/blog/13">Making Python Programs Blazingly Fast</a></li></ul></article><div class="jsx-1393389675 footer-container"><div class="jsx-1393389675 footer-container-links"><div class="jsx-1393389675 footer-links"><div class="jsx-1393389675 link-item"><a href="https://github.com/santhalakshminarayana" rel="noreferrer" target=" _blank" class="jsx-1393389675 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div><div class="jsx-1393389675 link-item"><a href="https://www.linkedin.com/in/santhalakshminarayana/" rel="noreferrer" target="_blank" class="jsx-1393389675 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></div></a></div><div class="jsx-1393389675 link-item"><a href="https://medium.com/@santhalakshminarayana/" rel="noreferrer" target="_blank" class="jsx-1393389675 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"></path></svg></div></a></div><div class="jsx-1393389675 link-item"><a href="https://www.kaggle.com/santhalnr/" rel="noreferrer" target="_blank" class="jsx-1393389675 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M.1025 7.3475c-.0681 0-.1022.0341-.1022.102v6.752c0 .0681.034.1022.1022.1022h.7049c.068 0 .1022-.034.1022-.1023v-1.481l.4187-.3985 1.5016 1.91c.041.0477.0884.0716.143.0716h.9091c.0476 0 .0748-.0135.0817-.0407.0135-.041.0066-.075-.0206-.1023l-1.9816-2.4618 1.9002-1.8384c.0204-.0205.0237-.051.01-.092-.0137-.0339-.0408-.051-.0816-.051h-.9398c-.0477 0-.0953.024-.143.0716L.9096 11.607V7.4496c0-.0679-.0342-.102-.1022-.102zm18.0417 0c-.068 0-.102.0341-.102.102v6.752c0 .0681.034.102.102.102h.705c.068 0 .102-.034.102-.102v-6.752c0-.068-.034-.102-.102-.102zM5.961 9.6254c-.5653 0-1.11.1806-1.6343.5415-.0545.0545-.0648.102-.0307.143l.3676.5208c.0272.0477.0717.0545.133.0204.3948-.2722.783-.4086 1.1644-.4086.2927 0 .5158.0886.669.2656.1532.1771.2197.3917.1992.6436-.6606.0681-1.1545.1495-1.4813.245-.8308.2383-1.2461.6913-1.2461 1.3586 0 .4222.1533.7695.4598 1.0419.3132.2654.6845.3982 1.1134.3982.4698 0 .8545-.1125 1.1542-.3372v.1432c0 .0682.0374.102.1123.102h.7048c.068 0 .102-.0338.102-.102V11.372c0-.6604-.2245-1.1406-.6739-1.4403-.3065-.2043-.6776-.3063-1.1134-.3063zm4.3225 0c-.6742 0-1.195.2622-1.5627.7865-.3133.4359-.4699.9671-.4699 1.5936 0 .6604.1634 1.2087.4903 1.6444.3744.4972.892.7455 1.5526.7455.5313 0 .9567-.1327 1.2768-.3982v.531c0 .858-.4122 1.287-1.236 1.287-.361 0-.732-.1907-1.1132-.572a.098.098 0 00-.0716-.0306c-.034 0-.0613.0102-.0817.0307l-.4802.48c-.0408.0613-.0375.1124.0103.1532.1361.1157.2554.2129.3576.2911.102.0783.1905.1413.2656.189.354.1975.7284.2961 1.1235.2961.6808 0 1.207-.1925 1.5781-.577.3711-.3848.5567-.9484.5567-1.6903V9.8196c0-.068-.034-.102-.102-.102h-.705c-.0682 0-.1021.034-.1021.102v.2043c-.3471-.2657-.7763-.3985-1.287-.3985zm4.8021 0c-.6742 0-1.195.2622-1.5627.7865-.3132.4359-.4699.9671-.4699 1.5936 0 .6604.1633 1.2087.4903 1.6444.3744.4972.892.7455 1.5526.7455.5311 0 .9566-.1327 1.2768-.3982v.531c0 .858-.4122 1.287-1.236 1.287-.361 0-.732-.1907-1.1133-.572a.098.098 0 00-.0716-.0306c-.034 0-.0612.0102-.0816.0307l-.48.48c-.0409.0613-.0376.1124.01.1532.1363.1157.2555.2129.3576.2911.1021.0783.1906.1413.2657.189.354.1975.7285.2961 1.1237.2961.6808 0 1.2068-.1925 1.5781-.577.371-.3848.5565-.9484.5565-1.6903V9.8196c0-.068-.034-.102-.102-.102h-.7049c-.0682 0-.1022.034-.1022.102v.2043c-.3474-.2657-.7763-.3985-1.287-.3985zm6.7457 0c-.6537 0-1.185.211-1.5936.6332-.4427.4632-.664 1.0283-.664 1.6956 0 .7083.225 1.2905.6743 1.7467.463.463 1.042.6945 1.7366.6945.6467 0 1.2154-.1838 1.7057-.5515.0545-.041.0545-.0884 0-.143l-.4802-.4903c-.041-.0409-.0919-.0409-.1533 0-.2998.2112-.6368.3167-1.0112.3167-.4222 0-.7729-.119-1.052-.3576-.2452-.2248-.3882-.5038-.429-.8375h3.3197c.0679 0 .1022-.0341.1022-.1023l.01-.2244c.0341-.6878-.1668-1.26-.6025-1.7162-.4224-.4426-.9432-.664-1.5627-.664zm-.0206.7865c.3268 0 .6062.1056.8377.3166.2452.211.371.4734.378.7865h-2.4618c.0613-.3269.2077-.5925.4392-.7968.2313-.2042.5004-.3063.8069-.3063zm-11.4249.102c.6196 0 1.0146.2181 1.1848.6538v1.6854c-.1702.4358-.5755.6538-1.2155.6538-.3133 0-.5687-.0986-.7661-.2963-.2656-.2518-.3983-.6538-.3983-1.2053 0-.9941.3984-1.4914 1.1951-1.4914zm4.802 0c.6196 0 1.0148.2181 1.1851.6538h-.0002v1.6854c-.1703.4358-.5755.6538-1.2155.6538-.3132 0-.5686-.0986-.7661-.2963-.2655-.2518-.3983-.6538-.3983-1.2053 0-.9941.3983-1.4914 1.195-1.4914zm-8.3586 1.6547v1.0215c-.286.286-.6675.412-1.1441.3779-.1703-.0135-.32-.0663-.4493-.1582-.1294-.0919-.2045-.2129-.2249-.3627-.0341-.2657.1158-.47.4495-.6129.2452-.1088.7013-.1974 1.3688-.2656z"></path></svg></div></a></div><div class="jsx-1393389675 link-item"><a href="https://www.quora.com/profile/Lakshmi-Narayana-217" rel="noreferrer" target="_blank" class="jsx-1393389675 link"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" style="color:#fffecb;font-size:calc(0.8rem + 1vw)" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12.738 18.701c-.831-1.635-1.805-3.287-3.708-3.287-.362 0-.727.061-1.059.209l-.646-1.289c.786-.678 2.058-1.214 3.693-1.214 2.544 0 3.851 1.229 4.888 2.792.613-1.335.904-3.14.904-5.375 0-5.582-1.744-8.447-5.822-8.447-4.018 0-5.757 2.865-5.757 8.447 0 5.553 1.739 8.389 5.757 8.389.64 0 1.22-.069 1.75-.225zm.996 1.947c-.881.237-1.817.366-2.743.366-5.352 0-10.59-4.269-10.59-10.478C.402 4.271 5.639 0 10.991 0c5.441 0 10.628 4.238 10.628 10.537 0 3.504-1.635 6.351-4.01 8.191.764 1.148 1.543 1.914 2.652 1.914 1.199 0 1.68-.915 1.77-1.649h1.557c.092.974-.402 5.007-4.766 5.007-2.652 0-4.047-1.528-5.096-3.328l.008-.024z"></path></svg></div></a></div></div></div><div class="jsx-1393389675 copy-right-container"><p class="jsx-1393389675 copy-right-text">Santha Lakshmi Narayana © 2022</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postMetadata":{"title":"Super fast Python (Part-2): Good Practices","description":"Write Python programs by following good practices to run code incredibly faster.","imgName":"super-fast-python-good-practices/super-fast-python-good-practices.jpg","date":"Nov 9, 2022","tags":["python-performance"],"keywords":["python-performance","python-optimize","python","fast-python","speed","python"],"id":"super-fast-python-good-practices"},"postContent":{"compiledSource":"var h=Object.defineProperty,c=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var p=(a,t,n)=\u003et in a?h(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,e=(a,t)=\u003e{for(var n in t||(t={}))i.call(t,n)\u0026\u0026p(a,n,t[n]);if(s)for(var n of s(t))r.call(t,n)\u0026\u0026p(a,n,t[n]);return a},l=(a,t)=\u003ec(a,u(t));var m=(a,t)=\u003e{var n={};for(var o in a)i.call(a,o)\u0026\u0026t.indexOf(o)\u003c0\u0026\u0026(n[o]=a[o]);if(a!=null\u0026\u0026s)for(var o of s(a))t.indexOf(o)\u003c0\u0026\u0026r.call(a,o)\u0026\u0026(n[o]=a[o]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:a}=o,t=m(o,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"super-fast-python-good-practices/super-fast-python-good-practices.jpg\",alt:\"Super fast Python\"}))),mdx(\"h1\",null,\"Super fast Python (Part-2): Good practices\"),mdx(\"p\",null,\"In the earlier post on \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow\"}),\"why Python is slow?\"),\", we discussed slowness is in Python due to its internal design of some essential components like GIL, dynamic typing, and interpretation.\"),mdx(\"p\",null,\"In this blog, we discuss some good practices to speed up Python incredibly faster.\"),mdx(\"p\",null,\"This is the second post in the series on Python performance and Optimization. The series points out the utilization of inbuilt libraries, low-level code conversions, and other Python implementations to speed-up Python. The other posts included in this series are \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"(Part-1): \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://santhalakshminarayana.github.io/blog/super-fast-python-why-python-slow\"}),\"Why Python is slow?\")),mdx(\"li\",{parentName:\"ul\"},\"(Part-2): Good practices to write fast Python code (this post)\"),mdx(\"li\",{parentName:\"ul\"},\"(Part-3): \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://santhalakshminarayana.github.io/blog/super-fast-python-multi-processing\"}),\"Multi-processing in Python\")),mdx(\"li\",{parentName:\"ul\"},\"(Part-4): Use Cython to get speed as fast as C\"),mdx(\"li\",{parentName:\"ul\"},\"(Part-5): Use Numba to speed up Python Functions and Classes\")),mdx(\"p\",null,\"The following section describes the various good practices one can use to make Python super speed (up to 30% or more) without any external support like PyPy, Cython, Numpy, etc.\"),mdx(\"h2\",null,\"Python good practices for super fast code\"),mdx(\"h3\",null,\"Use built-in data structures and libraries\"),mdx(\"p\",null,\"As Python data types are implemented directly in \",mdx(\"strong\",{parentName:\"p\"},\"C\"),\", using the built-in types like list, map, and trees, compared to custom types we define, really helps the program to run faster.\"),mdx(\"p\",null,\"Also, use built-in libraries for common algorithms like counting the duplicates, summing all list elements, finding the maximum element, etc, because these are all already written in \",mdx(\"strong\",{parentName:\"p\"},\"C\"),\" and compiled which makes these functions run faster than custom functions we write.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`from random import randint\n\nrand_nums = [randint(1, 100) for _ in range(100000)]\n`)),mdx(\"p\",null,\"Create 100000 random numbers between 1 and 100.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`%%timeit\ncc = 0\nfor i in range(len(rand_nums)):\n    cc += rand_nums[i]\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python:output\"}),`6.02 ms \\xB1 94 \\xB5s per loop (mean \\xB1 std. dev. of 7 runs, 100 loops each)\n`)),mdx(\"p\",null,\"Manually summing up the all numbers over running a loop takes approximately 6ms.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`%%timeit\ncc = sum(rand_nums)\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python:output\"}),`332 \\xB5s \\xB1 15 \\xB5s per loop (mean \\xB1 std. dev. of 7 runs, 1000 loops each)\n`)),mdx(\"p\",null,\"Using built-in \",mdx(\"em\",{parentName:\"p\"},\"sum()\"),\" takes only 0.3ms approximately.\"),mdx(\"h3\",null,\"Local Variables vs Global Variables\"),mdx(\"p\",null,\"When we call a function (a routine), the system pauses the code execution at the call site in the current routine (say \",mdx(\"strong\",{parentName:\"p\"},\"main()\"),\") where the call has been made and places the called function at the top of the call stack. Imagine if we have defined numerous global variables and made multiple function calls. The system has to make sure that all these global variables should be available for any routine placed in the call stack at all times. The system has to provide a lookup mechanism for both local and global variables for each routine. And with global variables, this lookup mechanism may take some time than local variables.\"),mdx(\"h3\",null,\"Import the sub-modules and functions directly\"),mdx(\"p\",null,\"When importing any module to use its sub-modules, classes, or functions, import them directly instead of importing just the module. When accessing objects using \",mdx(\"em\",{parentName:\"p\"},\".\"),\", it triggers dictionary lookup using \",mdx(\"em\",{parentName:\"p\"},\"_\",\"_\",\"getattribute\",\"_\",\"_\"),\". If we call the object multiple times using \",mdx(\"em\",{parentName:\"p\"},\".\"),\", that may increase the program time.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`# instead of this\nimport abc\ndef_obj = abc.Def()\n\n# do this\nfrom abc import Def\ndef_obj = Def()\n`)),mdx(\"h3\",null,\"Limit the usage of '.'\"),mdx(\"p\",null,\"Speaking of the lookup time with the module's object references, the same can be applied to the referencing of properties and functions of an object(both custom and in-built). \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`%%timeit\nll = []\nfor i in range(len(rand_nums)):\n    ll.append(rand_nums[i])\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python:output\"}),`6.67 ms \\xB1 84.7 \\xB5s per loop (mean \\xB1 std. dev. of 7 runs, 100 loops each)\n`)),mdx(\"p\",null,\"Adding the list elements by appending with \",mdx(\"em\",{parentName:\"p\"},\"list.append()\"),\" takes more time than following code because the function is assigned to a variable (functions are first-class citizens in Python) and used inside the loop. This simple practice avoids referencing the functions with \",mdx(\"strong\",{parentName:\"p\"},\"'.'\"),\" too often and finally limits the need for dictionary lookup.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`%%timeit\nll = []\nll_append = ll.append\nfor i in range(len(rand_nums)):\n    ll_append(rand_nums[i])\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python:output\"}),`5.45 ms \\xB1 116 \\xB5s per loop (mean \\xB1 std. dev. of 7 runs, 100 loops each)\n`)),mdx(\"h3\",null,\"Avoid writing functions unnecessary\"),mdx(\"p\",null,\"It's good to have code separability by using functions for each independent task. But, as functions in Python are relatively more expensive than C/C++ due to boxing and unboxing dynamic variables and other factors, limit writing functions for unnecessary cases like one-liners. \"),mdx(\"h3\",null,\"Don't wrap lambdas around functions\"),mdx(\"p\",null,\"Overuse or misuse of lambdas is not a good practice. It's common to wrap functions inside lambdas which do the same thing without wrapping.\"),mdx(\"p\",null,\"Consider the following two functions for sorting a list based on absolute values.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`def fun_sort_with_lambda(l):\n    return sorted(l, key=lambda x: abs(x))\n\ndef fun_sort_without_lambda(l):\n    return sorted(l, key=abs)\n`)),mdx(\"p\",null,\"If we look at the CPython bytecode for the above functions with lambda expression passed as a key and with \",mdx(\"em\",{parentName:\"p\"},\"abs\"),\" function object as a key,\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`\u003e\u003e\u003e from dis import dis\n\u003e\u003e\u003e dis(fun_sort_with_lambda)\n  2           0 LOAD_GLOBAL              0 (sorted)\n              2 LOAD_FAST                0 (l)\n              4 LOAD_CONST               1 (\u003ccode object \u003clambda\u003e at 0x7fc51b3a19d0, file \"\u003cipython-input-62-c4147c242c71\u003e\", line 2\u003e)\n              6 LOAD_CONST               2 ('fun_sort_with_lambda.\u003clocals\u003e.\u003clambda\u003e')\n              8 MAKE_FUNCTION            0\n             10 LOAD_CONST               3 (('key',))\n             12 CALL_FUNCTION_KW         2\n             14 RETURN_VALUE\n\nDisassembly of \u003ccode object \u003clambda\u003e at 0x7fc51b3a19d0, file \"\u003cipython-input-62-c4147c242c71\u003e\", line 2\u003e:\n  2           0 LOAD_GLOBAL              0 (abs)\n              2 LOAD_FAST                0 (x)\n              4 CALL_FUNCTION            1\n              6 RETURN_VALUE\n\n\u003e\u003e\u003e dis(fun_sort_without_lambda)\n  2           0 LOAD_GLOBAL              0 (sorted)\n              2 LOAD_FAST                0 (l)\n              4 LOAD_GLOBAL              1 (abs)\n              6 LOAD_CONST               1 (('key',))\n              8 CALL_FUNCTION_KW         2\n             10 RETURN_VALUE\n`)),mdx(\"p\",null,\"for the function \",mdx(\"em\",{parentName:\"p\"},\"fun_sort_with_lambda\"),\", there is an additional function has been generated for lambda. We can avoid this function generation without using lambda as we can see in function \",mdx(\"em\",{parentName:\"p\"},\"fun_sort_without_lambda\"),\". \"),mdx(\"h3\",null,\"List comprehension is fast\"),mdx(\"p\",null,\"When operating over lists like data structures, list comprehension is faster than traditional methods like looping, functional programming, etc.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python\"}),`%%timeit\nrand_nums = []\nfor _ in range(1000):\n    rand_nums.append(randint(1, 100))\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-output\"}),`603 \\xB5s \\xB1 15.3 \\xB5s per loop (mean \\xB1 std. dev. of 7 runs, 1000 loops each)\n`)),mdx(\"p\",null,\"The list comprehension version of the above code snippet runs faster.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python:output\"}),`%%timeit\nrand_nums = [randint(1, 100) for _ in range(1000)]\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-python:output\"}),`565 \\xB5s \\xB1 11 \\xB5s per loop (mean \\xB1 std. dev. of 7 runs, 1000 loops each)\n`)),mdx(\"hr\",null),mdx(\"p\",null,\"The optimization practices are not limited to the above approaches. We can check how much time it is taking for each line by using libraries like \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.python.org/3/library/profile.html\"}),\"CProfile\"),\" and making changes to run faster. In the next blog, we discuss how to improve Python computing efficiency using multiprocessing.\"),mdx(\"hr\",null),mdx(\"h3\",null,\"References\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://wiki.python.org/moin/PythonSpeed\"}),\"Python Speed\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://aglowiditsolutions.com/blog/python-optimization/\"}),\"Python Optimization\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://martinheinz.dev/blog/13\"}),\"Making Python Programs Blazingly Fast\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}},"id":"super-fast-python-good-practices"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"super-fast-python-good-practices"},"buildId":"jBc4UZUL4xIRAkt3gOT-Q","runtimeConfig":{},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>