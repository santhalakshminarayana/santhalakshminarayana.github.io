{"pageProps":{"postMetadata":{"title":"Image Enhancement using Retinex Algorithms","description":"Enhance low-light images using Retinex algorithms with Fast Fourier Transform in Python.","imgName":"retinex-image-enhancement/retinex-image-enhancement.jpg","date":"Mar 23, 2022","tags":["image-processing","color-science","opencv"],"keywords":["retinex","image-enhance","retinex-image-enhance","image-processing","python","color-correct","color-enhance","color-balance"],"id":"retinex-image-enhancement"},"postContent":{"compiledSource":"var o=Object.defineProperty,c=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var N=(s,e,n)=>e in s?o(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,a=(s,e)=>{for(var n in e||(e={}))t.call(e,n)&&N(s,n,e[n]);if(p)for(var n of p(e))r.call(e,n)&&N(s,n,e[n]);return s},i=(s,e)=>c(s,h(e));var l=(s,e)=>{var n={};for(var m in s)t.call(s,m)&&e.indexOf(m)<0&&(n[m]=s[m]);if(s!=null&&p)for(var m of p(s))e.indexOf(m)<0&&r.call(s,m)&&(n[m]=s[m]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var m=n,{components:s}=m,e=l(m,[\"components\"]);return mdx(MDXLayout,i(a(a({},layoutProps),e),{components:s,mdxType:\"MDXLayout\"}),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/retinex-image-enhancement.jpg\",alt:\"Image Enhancement using Retinex Algorithms\"}))),mdx(\"h1\",null,\"Image Enhancement using Retinex Algorithms\"),mdx(\"p\",null,\"In the previous blog \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://santhalakshminarayana.github.io/blog/retinex-theory-of-color-vision\"}),\"Retinex theory of Color Vision\"),\", we discussed the theory behind the Retinex model and other studies related to the human visual system of color constancy explained by the Retinex. Even though Retinex failed to accurately define the human color constancy, over the years the Retinex has been modified and used in many image processing applications mainly image color/contrast enhancement, dynamic image compression, shadow removal, and color balancing. In this blog, we apply the Retinex model and its modification algorithms to enhance the low-light color images.\"),mdx(\"h3\",null,\"Types of Retinex\"),mdx(\"p\",null,\"Based on the approach of computing the lightness of an image, Retinex algorithms are broadly categorized into four types as shown in the following image.\"),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/retinex-types.jpg\",alt:\"Retinex types:=:80\"}))),mdx(\"p\",null,\"Among the above four types, \",mdx(\"strong\",{parentName:\"p\"},\"Center Surround Retinex\"),\" algorithms are widely used in image processing for image enhancement. In this blog, we discuss applying the following four algorithms from the center-surround category\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Single-Scale Retinex\"),mdx(\"li\",{parentName:\"ul\"},\"Multi-Scale Retinex\"),mdx(\"li\",{parentName:\"ul\"},\"Multi-Scale Retinex with Color Restoration\"),mdx(\"li\",{parentName:\"ul\"},\"Multi-Scale Retinex with Color Preservation\")),mdx(\"h2\",null,\"Retinex model and Lightness computation\"),mdx(\"p\",null,\"In the previous blog about \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://santhalakshminarayana.github.io/blog/retinex-theory-of-color-vision\"}),\"Retinex theory\"),\", we derived an equation that, the color of an image/scene that we perceive is equal to the illumination on the scene product the reflectance of the scene. When we formulate the previous statement in equation form, that gives\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"t\"),mdx(\"mi\",{parentName:\"mrow\"},\"i\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"f\"),mdx(\"mi\",{parentName:\"mrow\"},\"l\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mi\",{parentName:\"mrow\"},\"t\"),mdx(\"mi\",{parentName:\"mrow\"},\"a\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"r\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"l\"),mdx(\"mi\",{parentName:\"mrow\"},\"l\"),mdx(\"mi\",{parentName:\"mrow\"},\"u\"),mdx(\"mi\",{parentName:\"mrow\"},\"m\"),mdx(\"mi\",{parentName:\"mrow\"},\"i\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"a\"),mdx(\"mi\",{parentName:\"mrow\"},\"t\"),mdx(\"mi\",{parentName:\"mrow\"},\"i\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"Retinex(I)=Reflectance(r)*Illumination(S)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"e\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"i\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"e\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"e\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10764em\"}}),\"f\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.01968em\"}}),\"l\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"e\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"a\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"e\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.02778em\"}}),\"r\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.01968em\"}}),\"l\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.01968em\"}}),\"l\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"u\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"m\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"i\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"a\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"i\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),mdx(\"p\",null,\"where \",mdx(\"strong\",{parentName:\"p\"},\"I\"),\" is the retinex image, \",mdx(\"strong\",{parentName:\"p\"},\"r\"),\" is the reflectance of the surface, and \",mdx(\"strong\",{parentName:\"p\"},\"S\"),\" is the illumination on the surface. And the lightness of an image, which is computed in our visual system (Retina + Cortex) is computed by reflectance and illumination. If we assume illumination is uniform or smooth, then lightness depends only on reflectance value at a given position. \"),mdx(\"p\",null,\"With this assumption, Land and McCann tried to compute the relative reflectance of an image to estimate the relative lightness of the scene. First, they proposed an algorithm that involves random paths and relative ratios to compute lightness. But that algorithm accuracy highly depends on the number of paths taken, and, it takes so much time to compute the number of paths increases. So, Land published another method to calculate the lightness of a pixel in which the lightness of a pixel is the ratio between the value of a pixel and the average of the surrounding pixels considering the density of these surrounding pixels to have density proportional to the inverse of the square distance.\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"L\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"msub\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))))),mdx(\"mspace\",a({parentName:\"mrow\"},{linebreak:\"newline\"})),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2208\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"{\"),mdx(\"mn\",{parentName:\"mrow\"},\"0...\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"}\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mspace\",a({parentName:\"mrow\"},{width:\"0.862em\"})),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2208\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"{\"),mdx(\"mn\",{parentName:\"mrow\"},\"0...\"),mdx(\"mi\",{parentName:\"mrow\"},\"N\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"}\"),mdx(\"mspace\",a({parentName:\"mrow\"},{linebreak:\"newline\"})),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",a({parentName:\"mrow\"},{mathvariant:\"normal\"}),\".\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",{parentName:\"mrow\"},\"f\"),mdx(\"mspace\",a({parentName:\"mrow\"},{width:\"0.431em\"})),mdx(\"mi\",{parentName:\"mrow\"},\"r\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",{parentName:\"mrow\"},\"w\"),mdx(\"mi\",{parentName:\"mrow\"},\"s\"),mdx(\"mspace\",a({parentName:\"mrow\"},{width:\"0.862em\"})),mdx(\"mi\",{parentName:\"mrow\"},\"N\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",a({parentName:\"mrow\"},{mathvariant:\"normal\"}),\".\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",{parentName:\"mrow\"},\"f\"),mdx(\"mspace\",a({parentName:\"mrow\"},{width:\"0.431em\"})),mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mi\",{parentName:\"mrow\"},\"o\"),mdx(\"mi\",{parentName:\"mrow\"},\"l\"),mdx(\"mi\",{parentName:\"mrow\"},\"u\"),mdx(\"mi\",{parentName:\"mrow\"},\"m\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"s\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"L_{(x,y)}=\\\\frac{I_{(x,y)}}{F_{(x,y)}*I_{(x,y)}} \\\\\\\\ x\\\\in\\\\{0...M-1\\\\}, \\\\hspace2ex y\\\\in\\\\{0...N-1\\\\} \\\\\\\\ M=no.of \\\\hspace1ex rows \\\\hspace2ex N=no.of \\\\hspace1ex columns\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"L\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.4697299999999998em\",verticalAlign:\"-1.0412em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.4285299999999999em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.7451999999999996em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"}))))))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.0412em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"})))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace newline\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.5782em\",verticalAlign:\"-0.0391em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"\\u2208\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"0\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\"}\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.862em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"\\u2208\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"0\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"N\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\"}\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace newline\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.68333em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.8888799999999999em\",verticalAlign:\"-0.19444em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10764em\"}}),\"f\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.431em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.02778em\"}}),\"r\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.02691em\"}}),\"w\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"s\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.862em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"N\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.8888799999999999em\",verticalAlign:\"-0.19444em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10764em\"}}),\"f\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.431em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"o\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.01968em\"}}),\"l\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"u\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"m\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"s\")))))),mdx(\"p\",null,\"where \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"L\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"L_{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"L\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))))))),\" is lightness of image at pixel position \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"(x,y)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\", and \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"F_{(x,y)}*I_{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))))))),\" is the average of the surrounding pixels at \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"(x,y)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\" given by the center surround function \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"F_{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))))))),\".\"),mdx(\"p\",null,\"As the retinex image is equal to the reflectance of the scene under no effect of illumination, the retinex image (\",mdx(\"strong\",{parentName:\"p\"},\"R\"),\") is approximately equal to the relative lightness. That gives\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2248\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"R_{(x,y)} \\\\approx \\\\log(I_{(x,y)}) - \\\\log(F_{(x,y)}*I_{(x,y)})\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"\\u2248\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.1052em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.1052em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.1052em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),mdx(\"hr\",null),mdx(\"h2\",null,\"Single Scale Retinex\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Single-scale retinex (SSR)\"),\" is defined as the difference between the image at a given pixel (x,y) and the center-surround average of that pixel (x,y).\"),mdx(\"p\",null,\"The calculation of the above surrounding pixels average is equal to the inverse square spatial function for a given pixel. And we can use any high pass filter to calculate the surrounding average (Ex. Gaussian distribution) that satisfies the above conditions. \"),mdx(\"p\",null,\"If we consider Gaussian function (\",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"G\"),mdx(\"mi\",{parentName:\"msub\"},\"\\u03C3\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"G_{\\\\sigma}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.83333em\",verticalAlign:\"-0.15em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"G\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))))))),\") as center-surround function, then retinex image for each i-th channel in an image is,\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"G\"),mdx(\"mi\",{parentName:\"msub\"},\"\\u03C3\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"SSR_i{(x,y)} = \\\\log(I_i{(x,y)}) - \\\\log(G_{\\\\sigma}*I_i){(x,y)})\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"G\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),mdx(\"p\",null,\"That is the Single-scale retinex of an image is estimated by taking the logarithm difference of image and point-surround filter of the image at position (x,y). The operation \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"G\"),mdx(\"mi\",{parentName:\"msub\"},\"\\u03C3\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"(G_{\\\\sigma}*I_i)(x,y)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"G\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\" is nothing but gaussian blur of an image with given scale (\",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03C3\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\sigma\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),\"). The implementation in python is pretty straight-forward as\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"language-python\"}),`import numpy as np\nimport cv2 \n\ndef get_ksize(sigma):\n    # opencv calculates ksize from sigma as\n    # sigma = 0.3*((ksize-1)*0.5 - 1) + 0.8\n    # then ksize from sigma is\n    # ksize = ((sigma - 0.8)/0.15) + 2.0\n\n    return int(((sigma - 0.8)/0.15) + 2.0)\n\ndef get_gaussian_blur(img, ksize=0, sigma=5):\n    # if ksize == 0, then compute ksize from sigma\n    if ksize == 0:\n        ksize = get_ksize(sigma)\n    \n    # Gaussian 2D-kernel can be seperable into 2-orthogonal vectors\n    # then compute full kernel by taking outer product or simply mul(V, V.T)\n    sep_k = cv2.getGaussianKernel(ksize, sigma)\n\n    # if ksize >= 11, then convolution is computed by applying fourier transform\n    return cv2.filter2D(img, -1, np.outer(sep_k, sep_k))\n\ndef ssr(img, sigma):\n    # Single-scale retinex of an image\n    # SSR(x, y) = log(I(x, y)) - log(I(x, y)*F(x, y))\n    # F = surrounding function, here Gaussian\n    \n    return np.log10(img) - np.log10(get_gaussian_blur(img, ksize=0, sigma=sigma) + 1.0)\n`)),mdx(\"p\",null,\"The function \",mdx(\"em\",{parentName:\"p\"},\"ssr()\"),\" takes arguments of an image, for which retinex has to be estimated, and sigma value for Gaussian distribution. It returns the single-scale retinex image by subtracting the image and gaussian blur of an image. \"),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"get_gaussian_blur()\"),\" gives Gaussian blur of an image. In this function, we are not using normal \",mdx(\"em\",{parentName:\"p\"},\"cv2.GaussianBlur()\"),\" method but calculating Gaussian blur using \",mdx(\"em\",{parentName:\"p\"},\"cv2.filter2D()\"),\" using linear seperability of Gaussian distribution kernels. The reason is, \",mdx(\"em\",{parentName:\"p\"},\"cv2.GaussianBlur()\"),\" is too slow for large kernels. But \",mdx(\"em\",{parentName:\"p\"},\"cv2.filter2D()\"),\" applies filter to an image using \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Fast_Fourier_transform\"}),\"fast-Fourier transform\"),\" if \",mdx(\"em\",{parentName:\"p\"},\"kernel size (ksize)\"),\" > 11. \",mdx(\"strong\",{parentName:\"p\"},\"fast Fourier transform\"),\" computes the convolution in a very few milliseconds than the traditional convolution that takes days or even years to complete.\"),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},\"As \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://docs.opencv.org/4.5.5/de/dbc/tutorial_py_fourier_transform.html\"}),\"OpenCV implementation of fast-Fourier transform\"),\" is faster than NumPy implementation, we proceed with OpenCV default Fourier transform implementations instead of NumPy or SciPy.\")),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/single-scale-retinex.jpg\",alt:\"Single scale retinex:=:100\"}))),mdx(\"p\",null,\"In the above image, for SSR with \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03C3\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\sigma\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),\"=15, the output image has some corner areas enhanced but the color is not preserved and it all looks very dark and gray. In \",mdx(\"strong\",{parentName:\"p\"},\"SSR(80)\"),\" image, there has been some improvement in contrast enhancement than \",mdx(\"strong\",{parentName:\"p\"},\"SSR(15)\"),\", but the corner regions became dark and the overall picture looks gloomy. And finally, in \",mdx(\"strong\",{parentName:\"p\"},\"SSR(250)\"),\" image, a significant contrast improvement is done compared to both \",mdx(\"strong\",{parentName:\"p\"},\"SSR(15)\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"SSR(80)\"),\", but the corner regions became darker than the original image, and only the center region has been enhanced.\"),mdx(\"p\",null,\"It is great that with simple subtraction of image and gaussian image we have enhanced parts of an image to look better but still not a good solution for overall performance. And results are different for different scale values and it is hard to select any single scale value that gives the best results as enhancement purely depends on the nature of the image.\"),mdx(\"hr\",null),mdx(\"h2\",null,\"Multi Scale Retinex\"),mdx(\"p\",null,\"As the choice of \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03C3\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\sigma\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),\" varies for different images for good results and different scale values enhance different parts of an image, we can combine \",mdx(\"strong\",{parentName:\"p\"},\"SSR\"),\" of different scales and give weightage for each scale and take a summation of all weighted-SSR images. This method is called \",mdx(\"strong\",{parentName:\"p\"},\"Multi-scale retinex (MSR)\"),\" of an image and it is defined as the weighted average of \",mdx(\"strong\",{parentName:\"p\"},\"n\"),\" single-scale retinex images for different \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03C3\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\sigma\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),\" values.\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"munderover\",{parentName:\"mrow\"},mdx(\"mo\",{parentName:\"munderover\"},\"\\u2211\"),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\")),mdx(\"mi\",{parentName:\"munderover\"},\"N\")),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"w\"),mdx(\"mi\",{parentName:\"msub\"},\"n\")),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"MSR_i{(x,y)} = \\\\sum_{n=1}^Nw_{n}SSR_i{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"3.0954490000000003em\",verticalAlign:\"-1.267113em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop op-limits\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.8283360000000002em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-1.882887em\",marginLeft:\"0em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3.05em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel mtight\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"1\")))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.050005em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3.05em\"}})),mdx(\"span\",{parentName:\"span\"},mdx(\"span\",a({parentName:\"span\"},{className:\"mop op-symbol large-op\"}),\"\\u2211\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-4.3000050000000005em\",marginLeft:\"0em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3.05em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.10903em\"}}),\"N\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.267113em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.02691em\"}}),\"w\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.02691em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"n\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))))),mdx(\"p\",null,\"As the output \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"MSR_i{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),\" image might contain negative real values and the range of values is not suitable for image representaion i.e not in range \",mdx(\"strong\",{parentName:\"p\"},\"[0-255]\"),\", normalize the \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\" output for range \",mdx(\"strong\",{parentName:\"p\"},\"[0-255]\"),\" given by the following equation\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"255\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mi\",{parentName:\"mrow\"},\"min\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"max\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mi\",{parentName:\"mrow\"},\"min\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"MSR_i{(x,y)} = 255\\\\frac{MSR_i{(x,y)} - \\\\min(MSR_i)}{\\\\max(MSR_i) - \\\\min(MSR_i)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.363em\",verticalAlign:\"-0.936em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"5\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"5\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.427em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"max\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"min\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.677em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"min\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.936em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"})))))))),mdx(\"p\",null,\"where for channel \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"i\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.65952em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"i\"))))),\", \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"MSR_i{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),\" is the pixel value at position \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"(x,y)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\", \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"min\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\min(MSR_i)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"min\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\" is minimum value of the channel, and \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"max\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\max(MSR_i)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"max\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\" is maximum value of the channel  \"),mdx(\"p\",null,\"So, Multi-scale retinex is calculated by taking single-scale retinex for different scales and it is computed by the following function \"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"language-python\"}),`def msr(img, sigma_scales=[15, 80, 250]):\n    # Multi-scale retinex of an image\n    # MSR(x,y) = sum(weight[i]*SSR(x,y, scale[i])), i = {1..n} scales\n    \n    msr = np.zeros(img.shape)\n    # for each sigma scale compute SSR\n    for sigma in sigma_scales:\n        msr += ssr(img, sigma)\n    \n    # divide MSR by weights of each scale\n    # here we use equal weights\n    msr = msr / len(sigma_scales)\n    \n    # computed MSR could be in range [-k, +l], k and l could be any real value\n    # so normalize the MSR image values in range [0, 255]\n    msr = cv2.normalize(msr, None, 0, 255, cv2.NORM_MINMAX, dtype=cv2.CV_8UC3)\n    \n    return msr\n`)),mdx(\"p\",null,\"We give default sigma scale values as \",mdx(\"strong\",{parentName:\"p\"},\"[15, 80, 250]\"),\" with equal weights which preserve high, middle, and low frequencies of an image respectively. \",mdx(\"em\",{parentName:\"p\"},\"msr()\"),\" computes the \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\" of an image by calculating \",mdx(\"strong\",{parentName:\"p\"},\"SSR\"),\" for each \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03C3\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\sigma\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"\\u03C3\"))))),\" scale. In the end, normalization of the \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\" output is done because the computed values could be negative real values and not in a suitable range \",mdx(\"strong\",{parentName:\"p\"},\"[0-255]\"),\" for image representation.\"),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/multi-scale-retinex.jpg\",alt:\"Multi scale retinex:=:100\"}))),mdx(\"p\",null,\"The \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\" image for the above input image with scales \",mdx(\"strong\",{parentName:\"p\"},\"[15, 80, 250]\"),\" has many areas enhanced especially in the corner regions which are darker in the input image given by \",mdx(\"strong\",{parentName:\"p\"},\"SSR(15)\"),\". And the retinex output has contrast separation comparatively better than the input image added by \",mdx(\"strong\",{parentName:\"p\"},\"SSR(80)\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"SSR(250)\"),\", but the output image has an overall gray appeal. \"),mdx(\"p\",null,\"The output \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\" image is looking gray because retinex assumes the scene as in \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Color_normalization#Grey_world\"}),\"Gray world\"),\" where the average of all colors in the scene is close to gray color. If this assumption is failed in the input image, that is if there are colors that dominate the scene or some colors may not present, whatever the reason could be if the overall color average is not close to gray, then taking the average of multiple single-scale retinex images with equal weights gives output image with colors less saturated and close to gray color. So, we have to modify the Multi-scale retinex to preserve the color of the image.\"),mdx(\"hr\",null),mdx(\"h2\",null,\"Multi Scale Retinex with Color Restoration\"),mdx(\"p\",null,\"As the \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\" of an image looks colorless, the Multi-scale retinex output is multiplied with \",mdx(\"strong\",{parentName:\"p\"},\"Color-restoration function (CRF)\"),\" of chromaticity to restore the original colors of the input image approximately. And this method of calculating the Color-restoration function and applying it to Multi-scale retinex output is called \",mdx(\"strong\",{parentName:\"p\"},\"Multi-scale retinex with Color Restoration (MSRCR)\"),\".\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"MSRCR_i{(x,y)} = MSR_i{(x,y)}*CRF_i{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))))),mdx(\"p\",null,\"where \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"CRF_i{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),\" is color restoration vlaue for pixel (x,y) at i-th channel. The color restoration function is defined as\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B2\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"[\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B1\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msubsup\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msubsup\"},\"I\"),mdx(\"mi\",{parentName:\"msubsup\"},\"i\"),mdx(\"mo\",a({parentName:\"msubsup\"},{mathvariant:\"normal\",lspace:\"0em\",rspace:\"0em\"}),\"\\u2032\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"]\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"CRF_i{(x,y)} = \\\\beta[\\\\log(\\\\alpha*I'_i{(x,y)}]\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05278em\"}}),\"\\u03B2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"[\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.0037em\"}}),\"\\u03B1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.051892em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.8018919999999999em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.4530000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.113em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"\\u2032\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.247em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\"]\")))))),mdx(\"p\",null,\"where for i-th channel, at position \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"(x,y)\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),\", \",mdx(\"strong\",{parentName:\"p\"},\"CRF\"),\" depends on the ratio composition of the pixel at (x,y) for that channel value to the sum of all channel values which is equal to calculating chromaticity coordinates. Chromaticity coordinates are calculated as\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msubsup\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msubsup\"},\"I\"),mdx(\"mi\",{parentName:\"msubsup\"},\"i\"),mdx(\"mo\",a({parentName:\"msubsup\"},{mathvariant:\"normal\",lspace:\"0em\",rspace:\"0em\"}),\"\\u2032\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"munderover\",{parentName:\"mrow\"},mdx(\"mo\",{parentName:\"munderover\"},\"\\u2211\"),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"0\")),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"k\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\"))),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"c\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"I'_i{(x,y)} = \\\\frac{I_i{(x,y)}}{\\\\sum_{c=0}^{k-1} I_c{(x,y)}}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.051892em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.8018919999999999em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.4530000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.113em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"\\u2032\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.247em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.605718em\",verticalAlign:\"-1.178718em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.427em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.120992em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mop op-symbol small-op\",style:{position:\"relative\",top:\"-0.0000050000000000050004em\"}}),\"\\u2211\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.9890079999999999em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.40029em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel mtight\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"0\")))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.2029em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03148em\"}}),\"k\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin mtight\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"1\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.29971000000000003em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.677em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.178718em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"})))))))),mdx(\"p\",null,\"where \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"k\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"k\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.69444em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03148em\"}}),\"k\"))))),\" equals to no. of image channels, \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B1\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\alpha\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.0037em\"}}),\"\\u03B1\"))))),\" is to control non-linearity, and \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B2\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\beta\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.8888799999999999em\",verticalAlign:\"-0.19444em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05278em\"}}),\"\\u03B2\"))))),\" is to control total gain. The above equation can be written as\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B2\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"[\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B1\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mi\",{parentName:\"mrow\"},\"log\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"munderover\",{parentName:\"mrow\"},mdx(\"mo\",{parentName:\"munderover\"},\"\\u2211\"),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"0\")),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"k\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\"))),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"c\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"]\"),mdx(\"mspace\",a({parentName:\"mrow\"},{linebreak:\"newline\"}))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"CRF_i{(x,y)} = \\\\beta[\\\\log(\\\\alpha*I_i{(x,y)}) - \\\\log(\\\\sum_{c=0}^{k-1} I_c{(x,y)})] \\\\\\\\\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05278em\"}}),\"\\u03B2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"[\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.0037em\"}}),\"\\u03B1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"3.1032260000000003em\",verticalAlign:\"-1.267113em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"lo\",mdx(\"span\",a({parentName:\"span\"},{style:{marginRight:\"0.01389em\"}}),\"g\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mop op-limits\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.8361130000000003em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-1.882887em\",marginLeft:\"0em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3.05em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel mtight\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"0\")))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.050005em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3.05em\"}})),mdx(\"span\",{parentName:\"span\"},mdx(\"span\",a({parentName:\"span\"},{className:\"mop op-symbol large-op\"}),\"\\u2211\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-4.300005em\",marginLeft:\"0em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3.05em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03148em\"}}),\"k\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin mtight\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"1\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.267113em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\"]\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace newline\"})))))),mdx(\"p\",null,\"To achieve better contrast results, the \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" equation is modified to include \",mdx(\"strong\",{parentName:\"p\"},\"gain (G)\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"offset (b)\"),\" values.\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"G\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"[\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"F\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mi\",{parentName:\"mrow\"},\"b\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"]\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"MSRCR_i{(x,y)} = G[MSR_i{(x,y)}*CRF_i{(x,y)} - b]\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"G\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"[\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07153em\"}}),\"C\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.13889em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"b\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\"]\")))))),mdx(\"p\",null,\"The gain and offset values are introduced to transform the contrast range of the \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" image to distribute uniformly and to attenuate tails forming in the histogram graph. But these values are not general and don't work for every image. And to stretch the contrast, the final \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" image is \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Histogram_equalization\"}),\"contrast stretched\"),\" using \",mdx(\"a\",a({parentName:\"p\"},{href:\"http://www.ipol.im/pub/art/2011/llmps-scb/\"}),\"Simplest Color Balance\"),\" algorithm with a clipping percentage of 1% at both ends.\"),mdx(\"p\",null,\"We use default values suggested by different publishers for the above variables as \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B1\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"125\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"\\u03B2\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"46\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"G\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"192\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"b\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"30\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"\\\\alpha=125, \\\\beta=46, G=192, b=-30\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.43056em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.0037em\"}}),\"\\u03B1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.8888799999999999em\",verticalAlign:\"-0.19444em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"5\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05278em\"}}),\"\\u03B2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.8777699999999999em\",verticalAlign:\"-0.19444em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"4\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"6\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"G\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.8888799999999999em\",verticalAlign:\"-0.19444em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"9\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"b\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.72777em\",verticalAlign:\"-0.08333em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"3\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"0\")))))),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"language-python\"}),`def color_balance(img, low_per, high_per):\n    '''Contrast stretch img by histogram equilization with black and white cap'''\n    \n    tot_pix = img.shape[1] * img.shape[0]\n    # no.of pixels to black-out and white-out\n    low_count = tot_pix * low_per / 100\n    high_count = tot_pix * (100 - high_per) / 100\n\n    # channels of image\n    ch_list = []\n    if len(img.shape) == 2:\n        ch_list = [img]\n    else:\n        ch_list = cv2.split(img)\n    \n    cs_img = []\n    # for each channel, apply contrast-stretch\n    for i in range(len(ch_list)):\n        ch = ch_list[i]\n        # cummulative histogram sum of channel\n        cum_hist_sum = np.cumsum(cv2.calcHist([ch], [0], None, [256], (0, 256)))\n\n        # find indices for blacking and whiting out pixels\n        li, hi = np.searchsorted(cum_hist_sum, (low_count, high_count))\n        if (li == hi):\n            cs_img.append(ch)\n            continue\n        # lut with min-max normalization for [0-255] bins\n        lut = np.array([0 if i < li \n                        else (255 if i > hi else round((i - li) / (hi - li) * 255)) \n                        for i in np.arange(0, 256)], dtype = 'uint8')\n        # constrast-stretch channel\n        cs_ch = cv2.LUT(ch, lut)\n        cs_img.append(cs_ch)\n    \n    if len(cs_img) == 1:\n        return np.squeeze(cs_img)\n    elif len(cs_img) > 1:\n        return cv2.merge(cs_img)\n    return None\n\ndef msrcr(img, sigma_scales=[15, 80, 250], alpha=125, beta=46, G=192, b=-30, low_per=1, high_per=1):\n    # Multi-scale retinex with Color Restoration\n    # MSRCR(x,y) = G * [MSR(x,y)*CRF(x,y) - b], G=gain and b=offset\n    # CRF(x,y) = beta*[log(alpha*I(x,y) - log(I'(x,y))]\n    # I'(x,y) = sum(Ic(x,y)), c={0...k-1}, k=no.of channels\n    \n    img = img.astype(np.float64) + 1.0\n    # Multi-scale retinex and don't normalize the output\n    msr_img = msr(img, sigma_scales, apply_normalization=False)\n    # Color-restoration function\n    crf = beta * (np.log10(alpha * img) - np.log10(np.sum(img, axis=2, keepdims=True)))\n    # MSRCR\n    msrcr = G * (msr_img*crf - b)\n    # normalize MSRCR\n    msrcr = cv2.normalize(msrcr, None, 0, 255, cv2.NORM_MINMAX, dtype=cv2.CV_8UC3)\n    # color balance the final MSRCR to flat the histogram distribution with tails on both sides\n    msrcr = color_balance(msrcr, low_per, high_per)\n    \n    return msrcr\n`)),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/msrcr.jpg\",alt:\"Multi scale retinex with color restoration - MSRCR:=:100\"}))),mdx(\"p\",null,\"In the above \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" output image, the color contrast has been improved compared to Multi-scale retinex. Still, the color contrast is not as close to the original image. With using default values for gain, offset, and others, there might be a chance that some pixels will over-saturate and some will under-saturate. And working around different value settings for different images is not expected behavior from a good enhancement algorithm. The main drawback of this algorithm is to control at least 6 variables which is not a general working method.\"),mdx(\"hr\",null),mdx(\"h2\",null,\"Multi Scale Retinex with Color Preservation\"),mdx(\"p\",null,\"In the previous algorithm \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\", color restoration was the main issue, and to address that we have introduced many variables and operations. All these calculations are computed directly on each channel value that changes chromaticity coordinates/color composition and the final result is unwanted colors, reversed color order, and sometimes grayish region due to surrounding average. To maintain the chromaticity/color composition as it is and also enhance the color contrast globally on the image, we can apply Multi-scale retinex on \",mdx(\"strong\",{parentName:\"p\"},\"intensity\"),\" image-channel which is just an addition of all image channels divided by the total number of channels.\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"munderover\",{parentName:\"mrow\"},mdx(\"mo\",{parentName:\"munderover\"},\"\\u2211\"),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mn\",{parentName:\"mrow\"},\"0\")),mdx(\"mrow\",{parentName:\"munderover\"},mdx(\"mi\",{parentName:\"mrow\"},\"k\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\"))),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"c\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mi\",{parentName:\"mfrac\"},\"k\"))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"Int_{(x,y)}=\\\\frac{\\\\sum_{c=0}^{k-1}I_c{(x,y)}}{k}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.364718em\",verticalAlign:\"-0.686em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.678718em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03148em\"}}),\"k\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.6897100000000003em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mop op-symbol small-op\",style:{position:\"relative\",top:\"-0.0000050000000000050004em\"}}),\"\\u2211\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.9890079999999999em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.40029em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel mtight\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"0\")))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.2029em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03148em\"}}),\"k\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin mtight\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),\"1\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.29971000000000003em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.686em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"})))))))),mdx(\"p\",null,\"where \",mdx(\"span\",a({parentName:\"p\"},{className:\"math math-inline\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"k\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"k\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.69444em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03148em\"}}),\"k\"))))),\" is no. of image channels.\"),mdx(\"p\",null,\"After applying Multi-scale retinex to the intensity image, apply contrast stretch like applied in \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" to set the image values in the range \",mdx(\"strong\",{parentName:\"p\"},\"[0-255]\"),\" with uniform distribution of histogram values.\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"S\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"RInt_{(x,y)}=MSR(Int_{(x,y)})\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.1052em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"S\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),mdx(\"p\",null,\"after the \",mdx(\"strong\",{parentName:\"p\"},\"MSR\"),\", apply the color balance step with a percentage clipping of 1% on both sides.\"),mdx(\"p\",null,\"Finally, preserving the initial chromaticity ratio between each image-channel and intensity image, multiply the ratio with enhance-intensity image channel for each image-channel to get the whole image.\"),mdx(\"p\",null,\"As we are applying retinex enhancement only on intensity-image, each color changes proportional to the ratio between enhance-intensity and normal intensity values. This keeps the relative intensity between surrounding colors locally and globally and gives better results than \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\".\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"R\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))))),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"i\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2217\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"A\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"R_i{(x,y)}=I_i{(x,y)}\\\\frac{RInt_i{(x,y)}}{Int_{(x,y)}}=I_i{(x,y)}*A_{(x,y)}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.00773em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.4682em\",verticalAlign:\"-1.0412em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.427em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.677em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.0412em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"}))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.31166399999999994em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"i\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2217\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"A\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"}))))))))))),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"A\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"min\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"M\"),mdx(\"mi\",{parentName:\"mrow\"},\"A\"),mdx(\"mi\",{parentName:\"mrow\"},\"X\"),mdx(\"mi\",a({parentName:\"mrow\"},{mathvariant:\"normal\"}),\"_\"),mdx(\"mi\",{parentName:\"mrow\"},\"V\"),mdx(\"mi\",{parentName:\"mrow\"},\"A\"),mdx(\"mi\",{parentName:\"mrow\"},\"L\"),mdx(\"mi\",{parentName:\"mrow\"},\"U\"),mdx(\"mi\",{parentName:\"mrow\"},\"E\")),mdx(\"mi\",{parentName:\"mfrac\"},\"B\")),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")))),mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"I\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"t\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))))),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"A_{(x,y)}=\\\\min(\\\\frac{MAX\\\\_VALUE}{B}, \\\\frac{RInt_{(x,y)}}{Int_{(x,y)}})\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"A\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.4697299999999998em\",verticalAlign:\"-1.0412em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"min\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.38333em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05017em\"}}),\"B\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.6999999999999997em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"M\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"A\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"X\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\",style:{marginRight:\"0.02778em\"}}),\"_\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.22222em\"}}),\"V\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"A\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"L\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.10903em\"}}),\"U\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05764em\"}}),\"E\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.686em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"}))),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.4285299999999999em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.7451999999999996em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.00773em\"}}),\"R\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"t\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"0em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"}))))))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.0412em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"}))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"B\"),mdx(\"mrow\",{parentName:\"msub\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\"))),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mi\",{parentName:\"mrow\"},\"max\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2061\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"msub\",{parentName:\"mrow\"},mdx(\"mi\",{parentName:\"msub\"},\"I\"),mdx(\"mi\",{parentName:\"msub\"},\"c\")),mdx(\"mrow\",{parentName:\"mrow\"},mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"(\"),mdx(\"mi\",{parentName:\"mrow\"},\"x\"),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"mo\",a({parentName:\"mrow\"},{separator:\"true\"}),\",\"),mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2208\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"{\"),mdx(\"mn\",{parentName:\"mrow\"},\"0...\"),mdx(\"mi\",{parentName:\"mrow\"},\"k\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u2212\"),mdx(\"mn\",{parentName:\"mrow\"},\"1\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\"}\"),mdx(\"mo\",a({parentName:\"mrow\"},{stretchy:\"false\"}),\")\")),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"B_{(x,y)}=\\\\max(I_c{(x,y)}, c\\\\in\\\\{0...k-1\\\\})\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1.03853em\",verticalAlign:\"-0.3551999999999999em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.05017em\"}}),\"B\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.34480000000000005em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5198em\",marginLeft:\"-0.05017em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen mtight\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct mtight\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose mtight\"}),\")\"))))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.3551999999999999em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mop\"}),\"max\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.07847em\"}}),\"I\"),mdx(\"span\",a({parentName:\"span\"},{className:\"msupsub\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.151392em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.5500000000000003em\",marginLeft:\"-0.07847em\",marginRight:\"0.05em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"2.7em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"sizing reset-size6 size3 mtight\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault mtight\"}),\"c\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.15em\"}}),mdx(\"span\",{parentName:\"span\"})))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"x\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03588em\"}}),\"y\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")),mdx(\"span\",a({parentName:\"span\"},{className:\"mpunct\"}),\",\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.16666666666666666em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\"}),\"c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"\\u2208\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"0\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathdefault\",style:{marginRight:\"0.03148em\"}}),\"k\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u2212\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"1em\",verticalAlign:\"-0.25em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\"}\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose\"}),\")\")))))),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"language-python\"}),`def msrcp(img, sigma_scales=[15, 80, 250], low_per=1, high_per=1):\n    # Multi-scale retinex with Color Preservation\n    # Int(x,y) = sum(Ic(x,y))/3, c={0...k-1}, k=no.of channels\n    # MSR_Int(x,y) = MSR(Int(x,y)), and apply color balance\n    # B(x,y) = MAX_VALUE/max(Ic(x,y))\n    # A(x,y) = max(B(x,y), MSR_Int(x,y)/Int(x,y))\n    # MSRCP = A*I\n    \n    # Intensity image (Int)\n    int_img = (np.sum(img, axis=2) / img.shape[2]) + 1.0\n    # Multi-scale retinex of intensity image (MSR)\n    msr_int = msr(int_img, sigma_scales)\n    # color balance of MSR\n    msr_cb = color_balance(msr_int, low_per, high_per)\n    \n    # B = MAX/max(Ic)\n    B = 256.0 / (np.max(img, axis=2) + 1.0)\n    # BB = stack(B, MSR/Int)\n    BB = np.array([B, msr_cb/int_img])\n    # A = min(BB)\n    A = np.min(BB, axis=0)\n    # MSRCP = A*I\n    msrcp = np.clip(np.expand_dims(A, 2) * img, 0.0, 255.0)\n    \n    return msrcp.astype(np.uint8)\n`)),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/msrcp.jpg\",alt:\"Multi scale retinex with color preservation - MSRCP:=:100\"}))),mdx(\"p\",null,\"The final \",mdx(\"strong\",{parentName:\"p\"},\"MSRCP\"),\" image above is looking much better than the \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" image by preserving relative color intensities in surrounding areas like stand boards have colors enhanced with maintaining relative color ratios between surroundings. The dark regions around the corner are transformed to bright colors but unwanted gray blocks are also upscaled due to a lack of texture information. \"),mdx(\"hr\",null),mdx(\"h3\",null,\"Result of other images\"),mdx(\"p\",null,\"The output results for other images are\"),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/retinex-result-1.jpg\",alt:\"Retinex image enhancement result:=:100\"}))),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"retinex-image-enhancement/retinex-result-2.jpg\",alt:\"Retinex color enhancement result:=:100\"}))),mdx(\"p\",null,\"The \",mdx(\"strong\",{parentName:\"p\"},\"MSRCP\"),\" output images are better than \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" if the scene has different colors like in images 4th, 5th, and 7th image. Under mono-color illumination like in the 6th image, \",mdx(\"strong\",{parentName:\"p\"},\"MSRCP\"),\" gave a highly saturated blue image while the output from \",mdx(\"strong\",{parentName:\"p\"},\"MSRCR\"),\" looks decent. Choice of the algorithm depends on the scene conditions like illumination, object colors, etc.\"),mdx(\"hr\",null),mdx(\"p\",null,\"The Retinex algorithms presented in the above sections are very basic but gave good results. Most of the super-enhance, image super-resolution, and image-compression models have an underlying model structure based on Retinex. There are other modified Retinex algorithms developed by Gimp, NASA, etc, which give industry-level results. Without training deep-learning models, we can use these Retinex algorithms to implement simple image-enhance filters where we can save resources and time.\"),mdx(\"hr\",null),mdx(\"h3\",null,\"References\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",a({parentName:\"li\"},{href:\"https://santhalakshminarayana.github.io/blog/retinex-theory-of-color-vision\"}),\"Retinex Theory of Color Vision\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",a({parentName:\"li\"},{href:\"http://www.ipol.im/pub/art/2014/107/\"}),\"Multiscale Retinex\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}},"id":"retinex-image-enhancement"},"__N_SSG":true}